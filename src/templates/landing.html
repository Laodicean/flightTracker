<html>
<head>
    <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
      $(function() {
        $( "#sortable" ).sortable();
        $( "#sortable" ).disableSelection();
      });
    </script>
</head>
<body>
<div id="query-wrapper">
    <nav class="navbar navbar-inverse navbar-fixed-top"></nav>
    <div class="jumbotron">
        <div class="row">
        <div class="col-md-1">
        </div>
        <div class="col-md-9">
        <h2>Flight Scheduler</h2>
        <div>Please enter your preferences below.</div>
        <p>
        <form>
            <div class="form-group">
                Travel Date: <input class="form-control" type="date" name="tDate">
            </div>
            <div class="form-group">
                Earliest Departure Time: <input class="form-control" type="time" name="depTime">
            </div>
            <div class="form-group">
                <div class="row">
                <div class="col-md-1">
                <p>From</p>
                </div>
                <div class="col-md-3">
                <select class="form-control" name="origCity">
                    {% for city in cities %}
                    <option value="{{ city }}">{{ city }}</option>
                    {% end %}
                </select>
                </div>
                <div class="col-md-1">
                <p>to</p>
                </div>
                <div class="col-md-3">
                <select class="form-control" name="desCity">
                    {% for city in cities %}
                    <option value="{{ city }}">{{ city }}</option>
                    {% end %}
                </select>
                </div>
                </div>
            </div>
            <div class="form-group">
                How important are each of these to you? Please rank your preferences below: 
                <div class="row">
                    <ul id="sortable">
                        <li id="Cost">Minimal cost</li>
                        <li id="Time">Minimal time travelling</li>  
                        <li id="ffp">Maximum Frequent Flyer Points</li> 
                    </ul>
                </div>
            </div>
            <div class="form-group">
                Which airline would you like to collect points for?
                <select class="form-control" name="ffpAirline">
                    {% for line in airlines %}
                    <option value="{{ line }}">{{ line }}</option>
                    {% end %}
                </select>
            <br>
            <div class="form-group">
                How many offers would you like to see?
                <input class="form-control" type="number" name="number">
            </div>
            <br>
            <button class="btn btn-lg btn-default" type="button" onclick="SendQuery()">Submit Query!</button> 
            </div>
        </form>
        </p>
    </div>
    </div>
    </div>
</div>
<!--The response will load here!-->
<div id="response-wrapper">   
</div>
<script type="text/javascript">
function SendQuery() {

    request=new XMLHttpRequest();

    args=$('form').serialize(); //Get form args and set metadata for request
    args += "&prefs="+$("#sortable").sortable("toArray").toString();
    request.open("GET","query?"+args,false);//Initalise request.


    request.send();//Make request. Blocking function

    response=request.responseText;
    document.getElementById("response-wrapper").innerHTML = response;
}
</script>
<div>
    <footer class="footer">
          <div class="container">
            <p class="text-muted">SENG2011 Project - Group 6</p>
          </div>
    </footer>
</div>
</body>
</html>
